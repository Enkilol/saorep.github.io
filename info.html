<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Informazioni sul prodotto</title>
  </head>
  <body>
    <div class="container p-5 my-5">
      <h1>Informazioni sul prodotto</h1>
      <div>
        <h2 id="product-name"></h2>

        <img id="productImage" src="" alt="Product Image">

        <p>Ingredienti:</p>
        <img src="https://cdn.pixabay.com/photo/2017/02/01/11/19/cartoon-chips-2029737_1280.png" alt="Ingredienti" width="50" height="50" />
        <p id="ingredients"></p>

        <p>Additivi:</p>
        <p id="additives"></p>
        <p>Impronta carbonica:</p>
        <p id="carbon-footprint"></p>
        <p>Confezionamento:</p>
        <p id="packaging"></p>

        <h5 a href="https://enkilol.github.io/saorep.github.io/">Torna indietro</h5>
      </div>
    </div>
    <script>
      const queryString = new URLSearchParams(window.location.search);
      const code = queryString.get("code");

      fetch(`https://world.openfoodfacts.org/api/v0/product/${code}.json?lang=it`)
        .then(response => response.json())
        .then(data => {
          const productName = data.product.product_name;
          const ingredients = data.product.ingredients_text;
          const additives = data.product.additives_tags;
          const carbonFootprint = data.product.carbon_footprint;
          const packaging = data.product.packaging;
          // Mostra i dati sul prodotto
          document.getElementById("product-name").innerHTML = productName;
          document.getElementById("ingredients").innerHTML = ingredients;
          document.getElementById("additives").innerHTML = additives.join(", ");
          document.getElementById("carbon-footprint").innerHTML = carbonFootprint;
          document.getElementById("packaging").innerHTML = packaging;
        })
        .catch(error => console.error(error));
    </script>



<script>
    //funzione che effettua la chiamata all'API Open Food Facts
    function getProductInfo(barcode) {
      //effettua la richiesta all'API per ottenere i dati del prodotto
      fetch(`https://world.openfoodfacts.org/api/v0/product/${barcode}.json`)
        .then(response => response.json())
        .then(data => {
          //recupera i dati del prodotto dalla risposta dell'API
          const product = data.product;
          //recupera l'URL dell'immagine del prodotto
          const imageUrl = product.image_front_url;
          //aggiorna la fonte dell'immagine con l'URL recuperato
          document.getElementById("productImage").src = imageUrl;
          //mostra il nome del prodotto e gli ingredienti sulla pagina
          //...
        })
        .catch(error => {
          console.error(error);
        });
    }
  </script>


  </body>
</html>

